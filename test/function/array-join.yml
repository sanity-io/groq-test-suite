name: "array::join() function"

version: ">= 1.1"

tests:
- name: Basic
  query: |
    array::join(~arr~, ~sep~)
  tests:
  # Basic
  - variables:
      arr: '["a", "b", "c"]'
      sep: '"-"'
    result: "a-b-c"
  # Empty separator
  - variables:
      arr: '["a", "b", "c"]'
      sep: '""'
    result: "abc"
  # Empty array
  - variables:
      arr: '[]'
      sep: '"-"'
    result: ""
  # Non-string types
  - variables:
      arr: '[3, "x", 4.1, true, {"x": 42}, [64]]'
      sep: '","'
    result: null

- name: Invalid arg types
  query: |
    array::join(~arr~, ~sep~)
  variables:
  - arr: '["a", "b", "c"]'
  - arr: 'null'
  - arr: '"x"'
  - arr: '42'
  result: null
  tests:
  - variables: {sep: 'null'}
  - variables: {sep: '42'}
  - variables: {sep: '[]'}
