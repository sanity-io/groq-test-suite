name: "sum() function"
features:
- experimentalFunctions

documents:
- _id: "a"
  _type: "doc"
  value: 1
  values: [1, 2, 3]
- _id: "b"
  _type: "doc"
  value: 22
  values: [4, 5, 6]
- _id: "c"
  _type: "doc"
  value: 99
  values: [7, 8, 9]
- _id: "d"
  _type: "doc"
  value: -3
  values: []

tests:
- name: "With namespace"
  query: |
    global::sum([])
  result: null

- query: |
    sum([1, 2, 3, 4])
  result: 10

- query: |
    sum([1, 2, 3, 4, null, "hello", true])
  result: 10

- query: |
    sum([])
  result: null

- query: |
    sum(*[_type == "doc"].value)
  result: 119

- query: |
    sum(*[_type == "doc"].values[])
  result: 45
