name: "Comparison operators"
variables:
  lt:
  - "<"
  - "<="
  gt:
  - ">"
  - ">="
  eq:
  - "=="
  - ">="
  - "<="
  ne:
  - "!="
  - "<"
  - ">"
  op:
  - "<"
  - "<="
  - ">"
  - ">="

  bool:
  - "true"
  - "false"

  # These are considered "unordered"
  un:
  - "{}"
  - "null"
  - "[]"
  - "(1 => 2)"
  - "(1 .. 2)"
  - "(1 ... 2)"

tests:
- name: "Numbers"
  result: true
  tests:
  - query: '1 ~eq~ 1'
  - query: '1 ~lt~ 2'
  - query: '2 ~gt~ 1'

- name: "Boolean"
  result: true
  variables:
    true: "true"
    false: "false"
  tests:
  - query: '~true~ ~gt~ ~false~'
  - query: '~false~ ~lt~ ~true~'
  - query: '~true~ ~eq~ ~true~'
  - query: '~false~ ~eq~ ~false~'

- name: "Strings"
  result: true
  variables:
    a: '"a"'
    b: '"b"'
    ab: '"ab"'
  tests:
  - query: '~a~ ~eq~ ~a~'
  - query: '~a~ ~lt~ ~b~'
  - query: '~a~ ~lt~ ~ab~'
  - query: '~b~ ~gt~ ~a~'
  - query: '~ab~ ~gt~ ~a~'

- name: "Datetimes"
  result: true
  variables:
    a: '"2020-01-01T12:00:00Z"'
    a2: '"2020-01-01T13:00:00+01:00"'
    b: '"2020-01-01T12:00:00.001Z"'
    c: '"2020-01-01T13:00:00Z"'
  tests:
  - query: 'dateTime(~a~) ~eq~ dateTime(~a~)'
  - query: 'dateTime(~a2~) ~eq~ dateTime(~a~)'
  - query: 'dateTime(~a~) ~lt~ dateTime(~c~)'
  - query: 'dateTime(~b~) ~gt~ dateTime(~a~)'

- name: "Datetimes against strings"
  result: null
  variables:
    a: '"2020-01-01T12:00:00Z"'
    b: '"2020-01-01T13:00:00Z"'
  tests:
  - query: 'dateTime(~a~) ~lt~ ~b~'
  - query: '~a~ ~lt~ dateTime(~b~)'

- name: "Mixed types"
  result: null
  tests:
  - query: '1 ~op~ "1"'
  - query: '1 ~op~ ~bool~'
  - query: '1 ~op~ ~un~'
  - query: '"1" ~op~ ~bool~'
  - query: '"1" ~op~ ~un~'
  - query: '~bool~ ~op~ ~un~'
  - query: '~un~ ~op~ ~un~'